{"ast":null,"code":"import _slicedToArray from\"/home/ulises/Documentos/ULISES/CV/challenge/web-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from\"react\";import FX from'../logic/FXtaxes';import api from'../logic/api';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';// FX rate convertion logic\nvar FXconverter=new FX(LoadingFxStatus);// FX data status\nfunction LoadingFxStatus(code){switch(code){case'OK':toast.success(\"Fixer data loaded\");break;case'ERR':toast.error(\"Err loading fixer data. try again\");break;default:toast.error(\"Err loading fixer data. try again\");break;}}function NewRateCard(promps){var _useState=useState([\"USD\",\"ARS\",\"BRL\"]),_useState2=_slicedToArray(_useState,2),selectToValues=_useState2[0],setselectToValues=_useState2[1];var _useState3=useState({convertAmount:0,fee:0,feeAmount:0,mark:0,selectFrom:'EUR',selectTo:'USD',amontToConvert:0}),_useState4=_slicedToArray(_useState3,2),cardObj=_useState4[0],setCardObj=_useState4[1];toast.configure();// convert amount\nfunction convert(){var amontToConvert=document.querySelector('#amountToconvert').value;var selectFromValue=document.querySelector('#selectFrom').value;var selectToValue=document.querySelector('#selectTo').value;var pair=selectFromValue+selectToValue;var amountConverted=FXconverter.getRate(pair,Number(amontToConvert));console.log(amountConverted);setCardObj({convertAmount:amountConverted.convertAmount,fee:amountConverted.fee,feeAmount:amountConverted.feeAmount,mark:amountConverted.mark,selectFrom:selectFromValue,selectTo:selectToValue,amontToConvert:amontToConvert});}// Change pair \nfunction clickFrom(){var selectFrom=document.querySelector('#selectFrom');switch(selectFrom.value){case'EUR':setselectToValues([\"USD\",\"ARS\",\"BRL\"]);break;case'USD':setselectToValues([\"ARS\",\"BRL\"]);break;case'BRL':setselectToValues([\"ARS\"]);break;default:setselectToValues([\"USD\",\"ARS\",\"BRL\"]);break;}convert();}// Clcick in boy \nfunction clcikBuy(){var newRateObj={pair:{from:{rate:cardObj.selectFrom,amount:Number(cardObj.amontToConvert)},to:{rate:cardObj.selectTo,amount:Number(cardObj.convertAmount)}},fee:Number(cardObj.fee),feeAmount:Number(cardObj.feeAmount),mark:Number(cardObj.mark)};api.postRate(newRateObj).then(function(res){if(res===201){toast.success(\"Rate saved\");promps.refreshRatesFromApi();}else if(res===409){toast.error(\"Err wrong rate information\");}else{toast.error(\"Err saving Rate\");}});}// Generate selectTo options\nfunction selectToItemGen(itemName,itemVal){return/*#__PURE__*/_jsx(\"option\",{value:itemVal,onClick:clickFrom,children:itemName},itemVal);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"New Rate\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"custom-select\",id:\"selectFrom\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",onClick:clickFrom,children:\"EUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",onClick:clickFrom,children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BRL\",onClick:clickFrom,children:\"BRL\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",\"aria-label\":\"Text input with dropdown button\",onChange:convert,id:\"amountToconvert\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center bd-highlight\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"bd-highlight text-primary\",children:\"=\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"select\",{className:\"custom-select\",id:\"selectTo\",children:selectToValues.map(function(e){return selectToItemGen(e,e);})})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",\"aria-label\":\"Text input with dropdown button\",id:\"amountConverted\",value:cardObj.convertAmount,disabled:true})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-5 font-weight-bold\",children:\"Fee:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-7\",id:\"cardFee\",children:cardObj.fee+\"%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-5 font-weight-bold\",children:\"Fee amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-7\",id:\"cardFeeAmount\",children:cardObj.feeAmount+\" \"+cardObj.selectFrom})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-5 font-weight-bold\",children:\"Mark-up\"}),/*#__PURE__*/_jsx(\"p\",{className:\"col-7\",id:\"cardMark\",children:cardObj.mark+\" \"+cardObj.selectFrom})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-primary\",onClick:clcikBuy,children:\"Buy\"})})})]})})]})});}export default NewRateCard;","map":{"version":3,"sources":["/home/ulises/Documentos/ULISES/CV/challenge/web-interface/src/components/NewRateCard.js"],"names":["React","useState","FX","api","toast","FXconverter","LoadingFxStatus","code","success","error","NewRateCard","promps","selectToValues","setselectToValues","convertAmount","fee","feeAmount","mark","selectFrom","selectTo","amontToConvert","cardObj","setCardObj","configure","convert","document","querySelector","value","selectFromValue","selectToValue","pair","amountConverted","getRate","Number","console","log","clickFrom","clcikBuy","newRateObj","from","rate","amount","to","postRate","then","res","refreshRatesFromApi","selectToItemGen","itemName","itemVal","map","e"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport FX from '../logic/FXtaxes';\nimport api from '../logic/api';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n// FX rate convertion logic\nlet FXconverter = new FX(LoadingFxStatus);\n// FX data status\nfunction LoadingFxStatus(code) {\n    switch (code) {\n        case 'OK':\n            toast.success(\"Fixer data loaded\");\n            break;\n        case 'ERR':\n            toast.error(\"Err loading fixer data. try again\");\n            break;\n        default:\n            toast.error(\"Err loading fixer data. try again\");\n            break;\n    }\n}\n\nfunction NewRateCard(promps) {\n\n    const [selectToValues, setselectToValues] = useState([\"USD\", \"ARS\", \"BRL\"]);\n    const [cardObj, setCardObj] = useState({\n        convertAmount: 0,\n        fee: 0,\n        feeAmount: 0,\n        mark: 0,\n        selectFrom: 'EUR',\n        selectTo: 'USD',\n        amontToConvert: 0\n    });\n    toast.configure();\n\n    // convert amount\n    function convert() {\n        let amontToConvert = document.querySelector('#amountToconvert').value;\n        let selectFromValue = document.querySelector('#selectFrom').value;\n        let selectToValue = document.querySelector('#selectTo').value;\n        let pair = selectFromValue + selectToValue;\n        let amountConverted = FXconverter.getRate(pair, Number(amontToConvert));\n        console.log(amountConverted)\n        setCardObj({\n            convertAmount: amountConverted.convertAmount,\n            fee: amountConverted.fee,\n            feeAmount: amountConverted.feeAmount,\n            mark: amountConverted.mark,\n            selectFrom: selectFromValue,\n            selectTo: selectToValue,\n            amontToConvert: amontToConvert\n        })\n    }\n\n    // Change pair \n    function clickFrom() {\n        let selectFrom = document.querySelector('#selectFrom');\n        switch (selectFrom.value) {\n            case 'EUR':\n                setselectToValues([\"USD\", \"ARS\", \"BRL\"]);\n                break;\n            case 'USD':\n                setselectToValues([\"ARS\", \"BRL\"]);\n                break;\n            case 'BRL':\n                setselectToValues([\"ARS\"]);\n                break;\n            default:\n                setselectToValues([\"USD\", \"ARS\", \"BRL\"]);\n                break;\n        }\n        convert();\n\n    }\n\n    // Clcick in boy \n    function clcikBuy() {\n\n        let newRateObj = {\n            pair: {\n                from: {\n                    rate: cardObj.selectFrom,\n                    amount: Number(cardObj.amontToConvert)\n                },\n                to: {\n                    rate: cardObj.selectTo,\n                    amount: Number(cardObj.convertAmount)\n                }\n            },\n            fee: Number(cardObj.fee),\n            feeAmount: Number(cardObj.feeAmount),\n            mark: Number(cardObj.mark)\n        }\n        api.postRate(newRateObj).then(res => {\n            if (res === 201) {\n                toast.success(\"Rate saved\");\n                promps.refreshRatesFromApi();\n            } else if (res === 409) {\n                toast.error(\"Err wrong rate information\");\n            } else {\n                toast.error(\"Err saving Rate\");\n            }\n\n        });\n    }\n\n    // Generate selectTo options\n    function selectToItemGen(itemName, itemVal) {\n        return (<option key={itemVal} value={itemVal} onClick={clickFrom}>{itemName}</option>)\n    }\n\n\n    return (\n        <div>\n            <div className=\"card\">\n                <div className=\"card-header\">\n                    New Rate\n             </div>\n                <div className=\"card-body\">\n\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-prepend\">\n                                    <select className=\"custom-select\" id=\"selectFrom\">\n                                        <option value=\"EUR\" onClick={clickFrom}>EUR</option>\n                                        <option value=\"USD\" onClick={clickFrom}>USD</option>\n                                        <option value=\"BRL\" onClick={clickFrom}>BRL</option>\n                                    </select>\n                                </div>\n                                <input type=\"number\" className=\"form-control\" aria-label=\"Text input with dropdown button\" onChange={convert} id=\"amountToconvert\" />\n                            </div>\n                        </div>\n                        <div className=\"col-12\">\n                            <div className=\"d-flex justify-content-center bd-highlight\">\n                                <h3 className=\"bd-highlight text-primary\">=</h3>\n                            </div>\n                        </div>\n                        <div className=\"col-12\">\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-prepend\">\n                                    <select className=\"custom-select\" id=\"selectTo\">\n                                        {\n                                            selectToValues.map(e => selectToItemGen(e, e))\n                                        }\n                                    </select>\n                                </div>\n                                <input type=\"number\" className=\"form-control\" aria-label=\"Text input with dropdown button\" id=\"amountConverted\" value={cardObj.convertAmount} disabled />\n                            </div>\n                        </div>\n                        <div className=\"col-12\">\n                            <div className=\"row\">\n                                <p className=\"col-5 font-weight-bold\">Fee:</p>\n                                <p className=\"col-7\" id=\"cardFee\">{cardObj.fee + \"%\"}</p>\n                            </div>\n                            <div className=\"row\">\n                                <p className=\"col-5 font-weight-bold\">Fee amount</p>\n                                <p className=\"col-7\" id=\"cardFeeAmount\">{cardObj.feeAmount + \" \" + cardObj.selectFrom}</p>\n                            </div>\n                            <div className=\"row\">\n                                <p className=\"col-5 font-weight-bold\">Mark-up</p>\n                                <p className=\"col-7\" id=\"cardMark\">{cardObj.mark + \" \" + cardObj.selectFrom}</p>\n                            </div>\n                        </div>\n                        <div className=\"col-12 mt-2\">\n                            <div className=\"d-flex justify-content-center bd-highlight\">\n                                <button type=\"button\" className=\"btn btn-outline-primary\" onClick={clcikBuy}>Buy</button>\n                            </div>\n\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default NewRateCard;"]},"metadata":{},"sourceType":"module"}