{"ast":null,"code":"import { map } from \"jquery\";\nexport default class FX {\n  constructor(LoadingFxStatus) {\n    this.fixerServer = 'http://data.fixer.io/api/latest?access_key=ffcc344a3f31700c0020d166fd17ea96';\n    this.fee = 5;\n    this.RatesMap = new Map();\n    this.LoadingFxStatus = LoadingFxStatus;\n    fetch(this.fixerServer).then(res => res.json()).then(data => {\n      if (data.success) {\n        this.fixerData = data;\n        this.refreshRatesValues();\n        this.LoadingFxStatus('OK');\n      } else {\n        this.LoadingFxStatus('ERR');\n      }\n    }).catch(this.LoadingFxStatus('ERR'));\n  }\n\n  refreshRatesValues() {\n    console.log(this.fixerData);\n    this.RatesMap.set('EURUSD', this.fixerData.rates.USD);\n    this.RatesMap.set('EURARS', this.fixerData.rates.ARS);\n    this.RatesMap.set('EURBRL', this.fixerData.rates.BRL);\n    this.RatesMap.set('USDARS', this.fixerData.rates.ARS / this.fixerData.rates.USD);\n    this.RatesMap.set('USDBRL', this.fixerData.rates.BRL / this.fixerData.rates.USD);\n    this.RatesMap.set('BRLARS', this.fixerData.rates.ARS / this.fixerData.rates.BRL);\n    console.log(this.RatesMap);\n  }\n\n  getRate(pair, amount) {\n    let rateObj = {};\n    rateObj.convertAmount = (this.RatesMap.get(pair) * amount).toFixed(2);\n    rateObj.fee = this.fee;\n    let feeAmount = amount * (this.fee / 100);\n    rateObj.feeAmount = feeAmount.toFixed(2);\n    let markAmount = amount + feeAmount;\n    rateObj.mark = markAmount.toFixed(2);\n    return rateObj;\n  }\n\n}","map":{"version":3,"sources":["/home/ulises/Documentos/ULISES/CV/challenge/web-interface/src/logic/FXtaxes.js"],"names":["map","FX","constructor","LoadingFxStatus","fixerServer","fee","RatesMap","Map","fetch","then","res","json","data","success","fixerData","refreshRatesValues","catch","console","log","set","rates","USD","ARS","BRL","getRate","pair","amount","rateObj","convertAmount","get","toFixed","feeAmount","markAmount","mark"],"mappings":"AAAA,SAASA,GAAT,QAAoB,QAApB;AAEA,eAAe,MAAMC,EAAN,CAAS;AAEpBC,EAAAA,WAAW,CAACC,eAAD,EAAkB;AACzB,SAAKC,WAAL,GAAmB,6EAAnB;AACA,SAAKC,GAAL,GAAW,CAAX;AACA,SAAKC,QAAL,GAAgB,IAAIC,GAAJ,EAAhB;AACA,SAAKJ,eAAL,GAAuBA,eAAvB;AAEAK,IAAAA,KAAK,CAAC,KAAKJ,WAAN,CAAL,CACCK,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEMG,IAAI,IAAI;AACV,UAAIA,IAAI,CAACC,OAAT,EAAkB;AACd,aAAKC,SAAL,GAAiBF,IAAjB;AACA,aAAKG,kBAAL;AACA,aAAKZ,eAAL,CAAqB,IAArB;AACH,OAJD,MAIO;AACH,aAAKA,eAAL,CAAqB,KAArB;AACH;AACJ,KAVD,EAUGa,KAVH,CAWI,KAAKb,eAAL,CAAqB,KAArB,CAXJ;AAaH;;AAEDY,EAAAA,kBAAkB,GAAI;AAClBE,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,SAAjB;AACA,SAAKR,QAAL,CAAca,GAAd,CAAkB,QAAlB,EAA4B,KAAKL,SAAL,CAAeM,KAAf,CAAqBC,GAAjD;AACA,SAAKf,QAAL,CAAca,GAAd,CAAkB,QAAlB,EAA4B,KAAKL,SAAL,CAAeM,KAAf,CAAqBE,GAAjD;AACA,SAAKhB,QAAL,CAAca,GAAd,CAAkB,QAAlB,EAA4B,KAAKL,SAAL,CAAeM,KAAf,CAAqBG,GAAjD;AACA,SAAKjB,QAAL,CAAca,GAAd,CAAkB,QAAlB,EAA4B,KAAKL,SAAL,CAAeM,KAAf,CAAqBE,GAArB,GAA2B,KAAKR,SAAL,CAAeM,KAAf,CAAqBC,GAA5E;AACA,SAAKf,QAAL,CAAca,GAAd,CAAkB,QAAlB,EAA4B,KAAKL,SAAL,CAAeM,KAAf,CAAqBG,GAArB,GAA2B,KAAKT,SAAL,CAAeM,KAAf,CAAqBC,GAA5E;AACA,SAAKf,QAAL,CAAca,GAAd,CAAkB,QAAlB,EAA4B,KAAKL,SAAL,CAAeM,KAAf,CAAqBE,GAArB,GAA2B,KAAKR,SAAL,CAAeM,KAAf,CAAqBG,GAA5E;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKZ,QAAjB;AACH;;AAEDkB,EAAAA,OAAO,CAACC,IAAD,EAAOC,MAAP,EAAc;AACjB,QAAIC,OAAO,GAAG,EAAd;AAEAA,IAAAA,OAAO,CAACC,aAAR,GAAwB,CAAE,KAAKtB,QAAL,CAAcuB,GAAd,CAAkBJ,IAAlB,IAA0BC,MAA5B,EAAoCI,OAApC,CAA4C,CAA5C,CAAxB;AACAH,IAAAA,OAAO,CAACtB,GAAR,GAAc,KAAKA,GAAnB;AACA,QAAI0B,SAAS,GAAGL,MAAM,IAAI,KAAKrB,GAAL,GAAW,GAAf,CAAtB;AACAsB,IAAAA,OAAO,CAACI,SAAR,GAAoBA,SAAS,CAACD,OAAV,CAAkB,CAAlB,CAApB;AACA,QAAIE,UAAU,GAAGN,MAAM,GAAGK,SAA1B;AACAJ,IAAAA,OAAO,CAACM,IAAR,GAAeD,UAAU,CAACF,OAAX,CAAmB,CAAnB,CAAf;AACA,WAAOH,OAAP;AACH;;AA5CmB","sourcesContent":["import { map } from \"jquery\";\n\nexport default class FX {\n\n    constructor(LoadingFxStatus) {\n        this.fixerServer = 'http://data.fixer.io/api/latest?access_key=ffcc344a3f31700c0020d166fd17ea96';\n        this.fee = 5;\n        this.RatesMap = new Map();\n        this.LoadingFxStatus = LoadingFxStatus;\n\n        fetch(this.fixerServer)\n        .then(res => res.json())\n        .then(data => {\n            if (data.success) {\n                this.fixerData = data;\n                this.refreshRatesValues();\n                this.LoadingFxStatus('OK');\n            } else {\n                this.LoadingFxStatus('ERR');\n            }       \n        }).catch(\n            this.LoadingFxStatus('ERR')\n        );\n    }\n\n    refreshRatesValues () {\n        console.log(this.fixerData);\n        this.RatesMap.set('EURUSD', this.fixerData.rates.USD);\n        this.RatesMap.set('EURARS', this.fixerData.rates.ARS);\n        this.RatesMap.set('EURBRL', this.fixerData.rates.BRL);\n        this.RatesMap.set('USDARS', this.fixerData.rates.ARS / this.fixerData.rates.USD);\n        this.RatesMap.set('USDBRL', this.fixerData.rates.BRL / this.fixerData.rates.USD);\n        this.RatesMap.set('BRLARS', this.fixerData.rates.ARS / this.fixerData.rates.BRL); \n        console.log(this.RatesMap);\n    }\n\n    getRate(pair, amount){\n        let rateObj = {};\n\n        rateObj.convertAmount = ( this.RatesMap.get(pair) * amount).toFixed(2);\n        rateObj.fee = this.fee;\n        let feeAmount = amount * (this.fee / 100);\n        rateObj.feeAmount = feeAmount.toFixed(2);\n        let markAmount = amount + feeAmount; \n        rateObj.mark = markAmount.toFixed(2);\n        return rateObj;\n    }\n}"]},"metadata":{},"sourceType":"module"}